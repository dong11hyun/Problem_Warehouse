## í”„ë¡œì íŠ¸ ìƒì„¸ì„¤ëª… 3ë‹¨ê³„ - ì›¹ ì‹œê°í™” ë° ì¹´ì¹´ì˜¤ë§µ í‘œì‹œ

> ğŸ¯ **ëª©í‘œ**: íì—… ë§¤ì¥ ë¶„ì„ ê²°ê³¼ë¥¼ ì¹´ì¹´ì˜¤ë§µì— ì‹œê°í™”í•˜ì—¬ ì›¹ì—ì„œ í™•ì¸
> 
> ğŸ“ **ê´€ë ¨ íŒŒì¼**: 
> - `check_store_closure.py` (íì—… ë¶„ì„ ê²°ê³¼ â†’ StoreClosureResult)
> - `stores/templates/store_closure_map.html` (ì¹´ì¹´ì˜¤ë§µ ì‹œê°í™”)
> - `stores/views.py` (ë·° í•¨ìˆ˜)
> - `stores/urls.py` (URL ë¼ìš°íŒ…)
>
> ğŸ³ **ì‹¤í–‰ í™˜ê²½**: Docker (web + db ì»¨í…Œì´ë„ˆ)

---

### 3-1. check_store_closure.py ê²°ê³¼ê°€ DBì— ë°˜ì˜ë˜ëŠ” ê³¼ì •

**ë°ì´í„° íë¦„:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     check_store_closure.py ì‹¤í–‰                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1ë‹¨ê³„] ì¹´ì¹´ì˜¤ API í¸ì˜ì  ë¡œë“œ                                           â”‚
â”‚         YeongdeungpoConvenience â†’ 463ê°œ                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [2ë‹¨ê³„] ë¹„êµ ë°ì´í„°ì…‹ ë¡œë“œ                                               â”‚
â”‚   - SeoulRestaurantLicense (í¸ì˜ì ) â†’ 310ê°œ                             â”‚
â”‚   - TobaccoRetailLicense (ë‹´ë°°) â†’ 1,034ê°œ                               â”‚
â”‚   - public_data.csv (ìƒê¶Œ) â†’ 504ê°œ                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [3ë‹¨ê³„] ë§¤ì¹­ ìˆ˜í–‰ (ì´ë¦„ / ì£¼ì†Œ / ì¢Œí‘œ OR ì¡°ê±´)                           â”‚
â”‚   - í•˜ë‚˜ë¼ë„ ë§¤ì¹­ â†’ ì •ìƒ                                                â”‚
â”‚   - ì•„ë¬´ê²ƒë„ ë§¤ì¹­ ì•ˆë¨ â†’ íì—…                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [4ë‹¨ê³„] ê²°ê³¼ ì €ì¥                                                        â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚    CSV íŒŒì¼ ì €ì¥            â”‚  â”‚    DB ì €ì¥ (StoreClosureResult)  â”‚ â”‚
â”‚   â”‚  store_closure_result.csv   â”‚  â”‚  PostgreSQL í…Œì´ë¸”              â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**DB ì €ì¥ í•µì‹¬ ì½”ë“œ:**
```python
# check_store_closure.py - 4ë‹¨ê³„ DB ì €ì¥

from stores.models import StoreClosureResult

for r in results:
    lat = r['ìœ„ë„']
    lng = r['ê²½ë„']
    location = Point(lng, lat, srid=4326) if lat and lng else None
    
    # update_or_create: ê¸°ì¡´ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸, ì—†ìœ¼ë©´ ìƒì„±
    obj, created = StoreClosureResult.objects.update_or_create(
        place_id=r['place_id'],  # ì¹´ì¹´ì˜¤ ì¥ì†Œ IDë¡œ ìœ ë‹ˆí¬ ì‹ë³„
        defaults={
            'name': r['ì´ë¦„'],
            'address': r['ì£¼ì†Œ'],
            'latitude': lat,
            'longitude': lng,
            'location': location,            # PostGIS Point ê°ì²´
            'status': r['ìƒíƒœ'],              # 'ì •ìƒ' ë˜ëŠ” 'íì—…'
            'match_reason': r['ë§¤ì¹­ì´ìœ '],    # 'ì´ë¦„', 'ì£¼ì†Œ', 'ì¢Œí‘œ' ë“±
        }
    )
```

---

### 3-2. Docker ì„œë²„ ì‹œì‘

```powershell
# 1. í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
cd C:\A3_radius_collector-Public

# 2. Docker Compose ì‹¤í–‰
docker compose up -d

# 3. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker compose ps

# 4. ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸ (ì„ íƒ)
docker compose logs -f web
```

---

### 3-3. ì „ì²´ ì‹¤í–‰ ìˆœì„œ (1ë‹¨ê³„ â†’ 2ë‹¨ê³„ â†’ 3ë‹¨ê³„)

```powershell
# ============================================================
# ğŸš€ ì „ì²´ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
# ============================================================

# Docker ì‹œì‘
docker compose up -d

# ë§ˆì´ê·¸ë ˆì´ì…˜ (ìµœì´ˆ 1íšŒ)
docker compose exec web python manage.py migrate

# ============================================================
# 1ë‹¨ê³„: ë‹¤ì´ì†Œ ë° í¸ì˜ì  ìˆ˜ì§‘
# ============================================================

# ì˜ë“±í¬êµ¬ ë‹¤ì´ì†Œ ìˆ˜ì§‘ (ë‹¤ì´ì†Œ ê³µì‹ API)
docker compose exec web python manage.py v2_3_1_collect_yeongdeungpo_daiso

# ì˜ë“±í¬êµ¬ í¸ì˜ì  ìˆ˜ì§‘ (ë‹¤ì´ì†Œ ê¸°ë°˜, ì—„ê²©í•œ í•„í„°ë§)
docker compose exec web python manage.py v2_3_2_collect_Convenience_Only

# ============================================================
# 2ë‹¨ê³„: ê³µê³µë°ì´í„° ìˆ˜ì§‘
# ============================================================

# íœ´ê²ŒìŒì‹ì  ì¸í—ˆê°€ (í¸ì˜ì ë§Œ)
docker compose exec web python manage.py openapi_1

# ë‹´ë°°ì†Œë§¤ì—… ì¸í—ˆê°€
docker compose exec web python manage.py openapi_2

# ============================================================
# 3ë‹¨ê³„: íì—… ë¶„ì„ ë° ì‹œê°í™”
# ============================================================

# íì—… ë§¤ì¥ ì²´í¬ (DB ì €ì¥ + CSV ìƒì„±)
docker compose exec web python manage.py check_store_closure

# ============================================================
# ë¸Œë¼ìš°ì €ì—ì„œ ê²°ê³¼ í™•ì¸
# ============================================================
# http://127.0.0.1:8000/stores/closure-map/
```

---

### 3-4. ì›¹ì—ì„œ ê²°ê³¼ í™•ì¸í•˜ê¸°

**Django í™˜ê²½ì—ì„œ ì¹´ì¹´ì˜¤ë§µ ì‹œê°í™”:**

```
ë¸Œë¼ìš°ì € ì ‘ì†: http://127.0.0.1:8000/stores/closure-map/
```

**í™”ë©´ êµ¬ì„±:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ—ºï¸ ì¹´ì¹´ì˜¤ë§µ íì—… ë§¤ì¥ ì²´í¬ í”„ë¡œê·¸ë¨                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚   â”‚ ğŸ”µ ì •ìƒ: 452ê°œ       â”‚                                               â”‚
â”‚   â”‚ ğŸ”´ íì—…: 11ê°œ        â”‚                                               â”‚
â”‚   â”‚                      â”‚                                               â”‚
â”‚   â”‚ â”€â”€ ë²”ë¡€ â”€â”€           â”‚                                               â”‚
â”‚   â”‚ ğŸ”µ ì •ìƒ ì˜ì—…         â”‚                                               â”‚
â”‚   â”‚   (ê³µê³µë°ì´í„° í™•ì¸ë¨) â”‚                                               â”‚
â”‚   â”‚ ğŸ”´ íì—… ì¶”ì •         â”‚                                               â”‚
â”‚   â”‚   (ì¹´ì¹´ì˜¤ë§µ ì—…ë°ì´íŠ¸ í•„ìš”)â”‚                                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                  â”‚   â”‚
â”‚   â”‚                        ì¹´ì¹´ì˜¤ë§µ                                   â”‚   â”‚
â”‚   â”‚                                                                  â”‚   â”‚
â”‚   â”‚         ğŸ”µ      ğŸ”´                                               â”‚   â”‚
â”‚   â”‚     ğŸ”µ      ğŸ”µ      ğŸ”´                                           â”‚   â”‚
â”‚   â”‚                 ğŸ”µ                                               â”‚   â”‚
â”‚   â”‚         ğŸ”´          ğŸ”µ     ğŸ”µ                                    â”‚   â”‚
â”‚   â”‚     ğŸ”µ                                                           â”‚   â”‚
â”‚   â”‚                 ğŸ”µ      ğŸ”´                                       â”‚   â”‚
â”‚   â”‚                                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3-5. store_closure_map.html í…œí”Œë¦¿ í•µì‹¬ ì½”ë“œ

**ë§ˆì»¤ ìƒì„± ë¡œì§:**
```html
<!-- store_closure_map.html -->

<script>
    // Djangoì—ì„œ ì „ë‹¬ë°›ì€ ë°ì´í„° (JSON)
    var stores = JSON.parse('{{ stores_json|escapejs }}');

    // ì˜ë“±í¬êµ¬ ì¤‘ì‹¬ ì¢Œí‘œë¡œ ì§€ë„ ì´ˆê¸°í™”
    var mapOption = {
        center: new kakao.maps.LatLng(37.5171, 126.9066),  // ì˜ë“±í¬êµ¬ì²­ ë¶€ê·¼
        level: 5
    };
    var map = new kakao.maps.Map(mapContainer, mapOption);

    // ë§ˆì»¤ ìƒì„± (ì •ìƒ: íŒŒë€ìƒ‰, íì—…: ë¹¨ê°„ìƒ‰)
    stores.forEach(function (store) {
        if (!store.lat || !store.lng) return;

        var markerPosition = new kakao.maps.LatLng(store.lat, store.lng);

        // ìƒíƒœë³„ ë§ˆì»¤ ì´ë¯¸ì§€ ì„¤ì •
        var markerColor = store.status === 'ì •ìƒ' ?
            'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png' :
            'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png';

        var markerImage = new kakao.maps.MarkerImage(markerColor, imageSize, imageOption);

        var marker = new kakao.maps.Marker({
            position: markerPosition,
            title: store.name,
            image: markerImage
        });

        marker.setMap(map);

        // í´ë¦­ ì‹œ ì¸í¬ìœˆë„ìš° í‘œì‹œ
        kakao.maps.event.addListener(marker, 'click', function () {
            infowindow.open(map, marker);
        });
    });
</script>
```

**ë·°ì—ì„œ ë°ì´í„° ì „ë‹¬:**
```python
# stores/views.py

import json
from django.shortcuts import render
from stores.models import StoreClosureResult

def store_closure_map(request):
    # DBì—ì„œ ê²°ê³¼ ì¡°íšŒ
    results = StoreClosureResult.objects.all()
    
    # í†µê³„ ê³„ì‚°
    normal_count = results.filter(status='ì •ìƒ').count()
    closed_count = results.filter(status='íì—…').count()
    
    # JSON ë°ì´í„° ì¤€ë¹„
    stores_data = []
    for r in results:
        stores_data.append({
            'name': r.name,
            'address': r.address,
            'lat': r.latitude,
            'lng': r.longitude,
            'status': r.status,
            'match_reason': r.match_reason,
        })
    
    context = {
        'stores_json': json.dumps(stores_data, ensure_ascii=False),
        'normal_count': normal_count,
        'closed_count': closed_count,
        'kakao_js_key': settings.KAKAO_JS_KEY,  # JavaScript API í‚¤
    }
    
    return render(request, 'store_closure_map.html', context)
```

---

### 3-6. URL êµ¬ì¡°

```
http://127.0.0.1:8000/
â”œâ”€â”€ /admin/                       â† Django Admin
â”œâ”€â”€ /stores/                      â† ë§¤ì¥ ê´€ë ¨ ê¸°ëŠ¥
â”‚   â”œâ”€â”€ /closure-map/             â† ğŸ†• íì—… ë§¤ì¥ ì§€ë„
â”‚   â”œâ”€â”€ /closed/                  â† íì—… ì˜ì‹¬ ëª©ë¡
â”‚   â”œâ”€â”€ /closed/map/              â† íì—… ë§¤ì¥ ì „ìš© ì§€ë„
â”‚   â””â”€â”€ /convenience/             â† í¸ì˜ì  ì§€ë„
```

---

### 3-7. Django Shellì—ì„œ í™•ì¸

```powershell
# Django Shell ì ‘ì†
docker compose exec web python manage.py shell
```

```python
>>> from stores.models import StoreClosureResult

# ì „ì²´ ê²°ê³¼ ìˆ˜
>>> StoreClosureResult.objects.count()
463

# ì •ìƒ ì˜ì—… ë§¤ì¥
>>> StoreClosureResult.objects.filter(status='ì •ìƒ').count()
452

# íì—… ì¶”ì • ë§¤ì¥
>>> StoreClosureResult.objects.filter(status='íì—…').count()
11

# íì—… ë§¤ì¥ ëª©ë¡ (ìƒìœ„ 10ê°œ)
>>> for s in StoreClosureResult.objects.filter(status='íì—…')[:10]:
...     print(f"{s.name} | {s.address}")
...
CU ì˜ë“±í¬íƒ€ìš´ì  | ì„œìš¸ ì˜ë“±í¬êµ¬ ì˜ë“±í¬ë¡œ 123
GS25 ì‹ ê¸¸ì—­ì  | ì„œìš¸ ì˜ë“±í¬êµ¬ ë„ë¦¼ë¡œ 456
...

# ë§¤ì¹­ ì´ìœ ë³„ í†µê³„
>>> from django.db.models import Count
>>> StoreClosureResult.objects.values('match_reason').annotate(cnt=Count('id'))
<QuerySet [{'match_reason': 'ì´ë¦„', 'cnt': 156}, {'match_reason': 'ì£¼ì†Œ', 'cnt': 89}, ...]>

>>> exit()
```

---

### 3-8. PostgreSQLì—ì„œ ì§ì ‘ í™•ì¸

```powershell
# PostgreSQL ì ‘ì†
docker compose exec db psql -U postgres -d radius_collector

# íì—… ë¶„ì„ ê²°ê³¼ í…Œì´ë¸” í™•ì¸
\d store_closure_result

# ìƒíƒœë³„ í†µê³„
SELECT status, COUNT(*) AS count 
FROM store_closure_result 
GROUP BY status;

# ê²°ê³¼ ì˜ˆì‹œ:
#  status | count 
# --------+-------
#  ì •ìƒ   |   452
#  íì—…   |    11

# íì—… ë§¤ì¥ ëª©ë¡ (ì¢Œí‘œ í¬í•¨)
SELECT name, address, latitude, longitude 
FROM store_closure_result 
WHERE status = 'íì—…'
LIMIT 10;

# ë§¤ì¹­ ì´ìœ ë³„ í†µê³„
SELECT match_reason, COUNT(*) AS count 
FROM store_closure_result 
GROUP BY match_reason
ORDER BY count DESC;

# ì¢…ë£Œ
\q
```

---

### 3-9. API í‚¤ ì„¤ì •

> âš ï¸ **ì¤‘ìš”**: ì¹´ì¹´ì˜¤ë§µ í‘œì‹œë¥¼ ìœ„í•´ JavaScript API í‚¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.

**.env íŒŒì¼ ì„¤ì •:**
```env
# ì¹´ì¹´ì˜¤ REST API (ë°ì´í„° ìˆ˜ì§‘ìš©)
KAKAO_API_KEY=ë‚˜ì˜_ì¹´ì¹´ì˜¤_REST_API_í‚¤

# ì¹´ì¹´ì˜¤ JavaScript API (ì§€ë„ í‘œì‹œìš©)
KAKAO_JS_KEY=ë‚˜ì˜_ì¹´ì¹´ì˜¤_JavaScript_API_í‚¤

# ì„œìš¸ì‹œ OpenAPI
SEOUL_OPENAPI_KEY=ë‚˜ì˜_ì„œìš¸ì‹œ_OPENAPI_í‚¤
```

**ì¹´ì¹´ì˜¤ API í‚¤ ë°œê¸‰:**
1. https://developers.kakao.com/ ì ‘ì†
2. ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒì„±
3. ì•± í‚¤ â†’ REST API í‚¤ / JavaScript í‚¤ ë³µì‚¬
4. í”Œë«í¼ ì„¤ì •ì—ì„œ `http://localhost:8000` ë“±ë¡

---

### 3-10. Docker ê´€ë¦¬ ëª…ë ¹ì–´

```powershell
# ë¡œê·¸ í™•ì¸ (ì‹¤ì‹œê°„)
docker compose logs -f web

# íŠ¹ì • ì‹œê°„ ì´í›„ ë¡œê·¸
docker compose logs --since 10m web

# ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ (ì½”ë“œ ë³€ê²½ ë°˜ì˜)
docker compose restart web

# ì»¨í…Œì´ë„ˆ ì¤‘ì§€
docker compose down

# ì»¨í…Œì´ë„ˆ + ë°ì´í„° ì‚­ì œ (ì™„ì „ ì´ˆê¸°í™”)
docker compose down -v

# ì´ë¯¸ì§€ ì¬ë¹Œë“œ (requirements.txt ë³€ê²½ ì‹œ)
docker compose up -d --build
```

---

### 3ë‹¨ê³„ ìš”ì•½

| ì‘ì—… | Docker ëª…ë ¹ì–´ | ê²°ê³¼ |
|------|--------------|------|
| íì—… ë¶„ì„ | `docker compose exec web python manage.py check_store_closure` | DB + CSV ì €ì¥ |
| ì›¹ í™•ì¸ | ë¸Œë¼ìš°ì € http://127.0.0.1:8000/stores/closure-map/ | ì¹´ì¹´ì˜¤ë§µ ì‹œê°í™” |

```
ìµœì¢… ë°ì´í„° íë¦„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ìµœì¢… ì‹œìŠ¤í…œ êµ¬ì¡°ë„                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  [1ë‹¨ê³„ ìˆ˜ì§‘]                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ë‹¤ì´ì†Œ ê³µì‹ API     â”‚â”€â”€â”€â–¶â”‚ YeongdeungpoDaiso (16ê°œ)                 â”‚ â”‚
â”‚  â”‚ ì¹´ì¹´ì˜¤ API (í¸ì˜ì ) â”‚â”€â”€â”€â–¶â”‚ YeongdeungpoConvenience (463ê°œ)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚               â”‚
â”‚  [2ë‹¨ê³„ ê³µê³µë°ì´í„°]                                      â†“               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ OpenAPI (íœ´ê²ŒìŒì‹ì )â”‚â”€â”€â”€â–¶â”‚ SeoulRestaurantLicense (310ê°œ)           â”‚ â”‚
â”‚  â”‚ OpenAPI (ë‹´ë°°ì†Œë§¤)  â”‚â”€â”€â”€â–¶â”‚ TobaccoRetailLicense (1,034ê°œ)          â”‚ â”‚
â”‚  â”‚ CSV (ì†Œìƒê³µì¸ìƒê¶Œ)  â”‚â”€â”€â”€â–¶â”‚ public_data.csv (504ê°œ)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                          â”‚               â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                 â†“                                       â”‚
â”‚  [3ë‹¨ê³„ ë¶„ì„]      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                   â”‚        check_store_closure.py                    â”‚  â”‚
â”‚                   â”‚           OR ì¡°ê±´ ë§¤ì¹­                           â”‚  â”‚
â”‚                   â”‚    (ì´ë¦„ / ì£¼ì†Œ / ì¢Œí‘œ ì¤‘ í•˜ë‚˜ë¼ë„ ì¼ì¹˜)          â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                               â†“                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                   â”‚        StoreClosureResult                        â”‚  â”‚
â”‚                   â”‚   ì •ìƒ: 452ê°œ | íì—…: 11ê°œ                         â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                               â†“                        â”‚
â”‚  [ì›¹ ì‹œê°í™”]       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                   â”‚     store_closure_map.html (ì¹´ì¹´ì˜¤ë§µ)             â”‚  â”‚
â”‚                   â”‚     ğŸ”µ ì •ìƒ ì˜ì—… ë§ˆì»¤ | ğŸ”´ íì—… ì¶”ì • ë§ˆì»¤         â”‚  â”‚
â”‚                   â”‚     http://127.0.0.1:8000/stores/closure-map/    â”‚  â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ì „ì²´ ì‹¤í–‰ ëª…ë ¹ì–´ ìš”ì•½

```powershell
# ========================================================================
# ğŸš€ ì „ì²´ í”„ë¡œì íŠ¸ ì‹¤í–‰ ê°€ì´ë“œ
# ========================================================================

# 1. Docker ì‹œì‘
docker compose up -d

# 2. ë§ˆì´ê·¸ë ˆì´ì…˜ (ìµœì´ˆ 1íšŒ)
docker compose exec web python manage.py migrate

# 3. 1ë‹¨ê³„: ë‹¤ì´ì†Œ + í¸ì˜ì  ìˆ˜ì§‘
docker compose exec web python manage.py v2_3_1_collect_yeongdeungpo_daiso
docker compose exec web python manage.py v2_3_2_collect_Convenience_Only

# 4. 2ë‹¨ê³„: ê³µê³µë°ì´í„° ìˆ˜ì§‘
docker compose exec web python manage.py openapi_1    # íœ´ê²ŒìŒì‹ì (í¸ì˜ì )
docker compose exec web python manage.py openapi_2    # ë‹´ë°°ì†Œë§¤ì—…

# 5. 3ë‹¨ê³„: íì—… ë¶„ì„
docker compose exec web python manage.py check_store_closure

# 6. ì›¹ì—ì„œ í™•ì¸
# ë¸Œë¼ìš°ì €: http://127.0.0.1:8000/store-closure/

# ========================================================================
# ë°ì´í„° ì´ˆê¸°í™” í›„ ì¬ì‹¤í–‰ (í•„ìš” ì‹œ)
# ========================================================================
docker compose exec web python manage.py v2_3_1_collect_yeongdeungpo_daiso --clear
docker compose exec web python manage.py v2_3_2_collect_Convenience_Only --clear
docker compose exec web python manage.py openapi_1 --clear
docker compose exec web python manage.py openapi_2 --clear
docker compose exec web python manage.py check_store_closure
```

---

> ğŸ“Œ **í”„ë¡œì íŠ¸ ì™„ë£Œ!** 
> 
> ì¹´ì¹´ì˜¤ë§µì—ì„œ í¸ì˜ì  íì—… ì—¬ë¶€ë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - ğŸ”µ íŒŒë€ìƒ‰ ë§ˆì»¤: ì •ìƒ ì˜ì—… (ê³µê³µë°ì´í„°ì—ì„œ í™•ì¸ë¨)
> - ğŸ”´ ë¹¨ê°„ìƒ‰ ë§ˆì»¤: íì—… ì¶”ì • (ì¹´ì¹´ì˜¤ë§µ ì—…ë°ì´íŠ¸ í•„ìš”)
