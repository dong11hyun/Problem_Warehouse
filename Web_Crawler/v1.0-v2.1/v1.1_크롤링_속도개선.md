## 1. 핵심 차이점 상세

#### 1. 데이터 저장 방식 
파일 I/O 병목을 해결

* **v1.1 (SQLite 데이터베이스) 🏆**
    * **방식:** `sqlite3` 모듈을 사용하여 로컬 DB 파일(`sellers.db`)에 저장.
    * **로직:** 데이터를 메모리에 모았다가 **10개씩 묶어서(Batch)** 한 번에 저장 (`save_batch_to_db`).
    * **장점:** 파일 잠금(Lock) 병목 해소, `INSERT OR REPLACE`로 중복 데이터 방지, 대량 처리 시 높은 안정성.

####  2. 크롤링 속도 및 리소스 최적화
    * `v1.0`: 이미지, 미디어, 폰트 차단. /스크롤 후 1초 대기.
    * `v1.1`: 이미지, 미디어, 폰트 + 스타일시트(CSS) / 스크롤 후 0.5초 대기

####  3. 비동기 처리 방식 (Task 관리)

* **v1.0 (`asyncio.gather`):**
    * 모든 작업을 한 번에 던지고, 전부 끝날 때까지 기다림.
    * 중간 진행 상황 파악 및 실시간 저장이 구조적으로 어려움.

* **v1.1 (`asyncio.as_completed`):**
    * 작업을 던져놓고, **먼저 끝나는 순서대로** 즉시 결과를 받아서 처리.
    * 이 구조 덕분에 10개 단위의 **배치(Batch) 저장** 구현이 가능해짐.

#### 4. 코드 구조 및 안정성
네트워크 불안정 상황을 고려한 로직이 추가되었습니다.

* **DB 초기화:** `v1.1`은 `init_db()` 함수를 통해 실행 시 테이블 자동 생성.
* **요소 대기(Wait):**
    * `v1.0`: `if await page.locator(...).count() > 0` (단순 존재 여부 확인).
    * `v1.1`: `await page.wait_for_selector(..., timeout=3000)` (스마트 웨이팅 적용, 에러 확률 감소).

---

### 요약 비교표

| 구분 | v1.0_async_bot.py | v1.1_async_bot.py |
| :--- | :--- | :--- |
| **저장소** | CSV 파일 (엑셀) | **SQLite DB (데이터베이스)** |
| **저장 방식** | 1건씩 실시간 저장 (Lock 사용) | **10건씩 묶어서 저장 (Batch)** |
| **속도 최적화** | 이미지/폰트 차단 | **+ CSS 차단**, 대기시간 단축 (0.5s) |
| **병렬 처리** | `gather` (일괄 대기) | **`as_completed` (완료순 처리)** |
| **안정성** | 파일 충돌 가능성 있음 (`PermissionError`) | **DB 트랜잭션으로 안전함** |

---